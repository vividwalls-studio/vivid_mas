{% comment %}
  VividWalls Product Page - Theme-Integrated Figma Design
  Max 1200px width, center aligned, uses theme settings for fonts and colors
{% endcomment %}

{%- assign product_form_id = 'product-form-' | append: section.id -%}
{%- assign selected_variant = product.selected_or_first_available_variant -%}

<style>
  :root {
    --vw-font-family: {{ settings.type_body_font.family }}, {{ settings.type_body_font.fallback_families }};
    --vw-heading-font-family: {{ settings.type_header_font.family }}, {{ settings.type_header_font.fallback_families }};
    --vw-color-primary: {{ settings.colors_text }};
    --vw-color-secondary: {{ settings.colors_secondary }};
    --vw-color-accent: {{ settings.colors_accent_1 }};
    --vw-color-background: {{ settings.colors_background_1 }};
    --vw-color-surface: {{ settings.colors_background_2 }};
  }
</style>

<div data-layer="main-product-section" class="MainProductSection page-width color-{{ section.settings.color_scheme }} gradient" style="max-width: 1200px; width: 100%; padding-top: 100px; padding-bottom: 100px; background: var(--vw-color-background); flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 145px; display: flex; margin: 0 auto;">
  <div data-layer="Section-01" class="Section01" style="width: 100%; justify-content: flex-start; align-items: flex-start; gap: 50px; display: flex">
    <div data-layer="Artwork Container" class="ArtworkContainer" style="width: 800px; max-width: 66.67%; align-self: stretch; flex-direction: column; justify-content: flex-start; align-items: center; gap: 20px; display: flex">
      <div data-layer="Main Artwork Image" class="MainArtworkImage" style="width: 100%; height: 693px; justify-content: flex-start; align-items: flex-start; display: flex">
        <div data-layer="Artwork Image/{{ product.handle }}" class="ArtworkImage{{ product.handle | capitalize | replace: '-', '' }}" style="flex: 1 1 0; align-self: stretch; background: #F5F5F5; overflow: hidden; border-radius: 5px; justify-content: center; align-items: center; gap: 10px; display: flex">
          <img data-layer="img" class="Img" style="flex: 1 1 0; align-self: stretch; object-fit: cover;" src="{{ product.featured_media | image_url: width: 800 }}" />
        </div>
      </div>
      <div data-layer="Thumbnails Container" class="ThumbnailsContainer" style="align-self: stretch; position: relative; overflow: hidden; justify-content: flex-start; align-items: center; gap: 20px; display: flex">
        <div data-layer="Thumbnails" class="Thumbnails" style="flex: 1 1 0; justify-content: flex-start; align-items: center; gap: 20px; display: flex; overflow-x: auto;">
          {%- for media in product.media limit: 4 -%}
            <div data-layer="Thumbnail-Image" class="ThumbnailImage" style="width: 220px; min-width: 220px; height: 289px; flex-direction: column; justify-content: flex-start; align-items: flex-start; display: flex">
              <div data-layer="Thumbnail-Image / {% if forloop.first %}Full{% elsif forloop.index == 2 %}Large{% elsif forloop.index == 3 %}Medium{% else %}Small{% endif %}" data-state="{% if forloop.index == 2 %}Selected{% else %}Default{% endif %}" class="ThumbnailImage{% if forloop.first %}Full{% elsif forloop.index == 2 %}Large{% elsif forloop.index == 3 %}Medium{% else %}Small{% endif %}" style="align-self: stretch; flex: 1 1 0; flex-direction: column; justify-content: flex-start; align-items: center; display: flex; cursor: pointer;">
                {%- if forloop.index == 2 -%}
                  <div data-layer="Seleted" class="Seleted" style="width: 150px; height: 5px; position: relative; background: var(--vw-color-primary); border-radius: 5px"></div>
                {%- endif -%}
                <img data-layer="Screenshot {{ forloop.index }}" class="Screenshot{{ forloop.index }}" style="width: 220px; height: 289px; border-radius: 5px; object-fit: cover;" src="{{ media | image_url: width: 220 }}" />
              </div>
            </div>
          {%- endfor -%}
        </div>
        <div data-layer="Social Share Container" class="SocialShareContainer" style="width: calc(100% - 8px); left: 5px; top: 127px; position: absolute; justify-content: flex-end; align-items: center; display: flex">
          <div data-layer="Social Share Icon" class="SocialShareIcon" style="width: 35px; height: 35px; opacity: 0.70; background: white; border-radius: 100px; justify-content: center; align-items: center; gap: 10px; display: flex; cursor: pointer;">
            <div data-layer="Icons black/Chevron Right" class="IconsBlackChevronRight" style="width: 24px; height: 24px; position: relative">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div data-layer="Product Info" class="ProductInfo" style="flex: 1 1 0; min-width: 0; background: var(--vw-color-background); flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 30px; display: flex">
      <div data-layer="Product Info Container" class="ProductInfoContainer" style="align-self: stretch; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 16px; display: flex">
        <div data-layer="Product Info" class="ProductInfo" style="align-self: stretch; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
          <div data-layer="Product Name" class="ProductName" style="align-self: stretch; color: var(--vw-color-primary); font-size: 40px; font-family: var(--vw-heading-font-family); font-weight: 400; word-wrap: break-word">{{ product.title }}</div>
          <div data-layer="Artist Name" class="ArtistName" style="color: var(--vw-color-secondary); font-size: 16px; font-family: var(--vw-font-family); font-weight: 400; word-wrap: break-word">Collection â†’  {{ product.collections.first.title | default: "Vivid Layers" }}</div>
          <div data-layer="Artist Info Container" class="ArtistInfoContainer" style="justify-content: flex-start; align-items: center; gap: 4px; display: inline-flex">
            <div data-layer="Label" class="Label" style="color: var(--vw-color-secondary); font-size: 16px; font-family: var(--vw-font-family); font-style: italic; font-weight: 400; word-wrap: break-word">Original Art Illustrations by </div>
            <div data-layer="Artist Name" class="ArtistName" style="color: var(--vw-color-secondary); font-size: 16px; font-family: var(--vw-font-family); font-weight: 400; word-wrap: break-word">{{ product.vendor | default: "Kingler Bercy" }}</div>
          </div>
          <div data-layer="Tag Container" class="TagContainer" style="padding: 10px; background: var(--vw-color-primary); border-radius: 5px; justify-content: center; align-items: center; gap: 10px; display: inline-flex">
            <div data-layer="Tag" class="Tag" style="color: var(--vw-color-background); font-size: 16px; font-family: var(--vw-font-family); font-weight: 400; word-wrap: break-word">Limited Edition Print</div>
          </div>
        </div>
      </div>
      
      <form action="{{ routes.cart_add_url }}" method="post" enctype="multipart/form-data" id="{{ product_form_id }}">
        <div data-layer="Shopping Cart Component" class="ShoppingCartComponent" style="width: 100%; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 20px; display: flex">
          <div data-layer="Total Selected Price" class="TotalSelectedPrice" style="width: 100%; padding-left: 4px; padding-right: 4px; justify-content: space-between; align-items: center; display: flex">
            <div data-layer="Dimensions" class="Dimensions" style="justify-content: flex-start; align-items: center; gap: 3px; display: flex">
              {%- assign dimensions = selected_variant.title | split: 'x' -%}
              <div data-layer="Width" class="Width" style="color: var(--vw-color-primary); font-size: 18px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word">{{ dimensions[0] | strip }}</div>
              <div data-layer="Separator" class="Separator" style="color: var(--vw-color-primary); font-size: 18px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word">X</div>
              <div data-layer="Height" class="Height" style="color: var(--vw-color-primary); font-size: 18px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word">{{ dimensions[1] | strip }}</div>
            </div>
            <div data-layer="Total Price" class="TotalPrice" style="color: var(--vw-color-primary); font-size: 18px; font-family: var(--vw-font-family); font-weight: 600; word-wrap: break-word">{{ selected_variant.price | money }} USD</div>
          </div>
          <div data-layer="Variant_Picker" class="VariantPicker" style="width: 100%; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
            <div data-layer="Availablity" data-showoptions="True" class="Availablity" style="width: 100%; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
              {%- for variant in product.variants -%}
                {%- assign variant_dimensions = variant.title | split: 'x' -%}
                <div data-layer="Options & Availabity" data-isdefault="{% if forloop.first %}True{% else %}False{% endif %}" data-isselected="{% if variant == selected_variant %}True{% else %}False{% endif %}" data-issoldout="{% unless variant.available %}True{% else %}False{% endunless %}" class="OptionsAvailabity variant-option" data-variant-id="{{ variant.id }}" style="width: 100%; padding: 10px; {% if variant == selected_variant %}background: var(--vw-color-primary);{% else %}opacity: 0.70; background: var(--vw-color-surface);{% endif %} border-radius: 5px; outline: 1px {% if variant == selected_variant %}var(--vw-color-primary){% else %}var(--vw-color-surface){% endif %} solid; outline-offset: -1px; flex-direction: column; justify-content: flex-end; align-items: flex-end; gap: 10px; display: flex; cursor: pointer;">
                  <div data-layer="Product Info" class="ProductInfo" style="align-self: stretch; justify-content: space-between; align-items: center; display: inline-flex">
                    <div data-layer="Dimensions" class="Dimensions" style="justify-content: flex-start; align-items: center; gap: 3px; display: flex">
                      <div data-layer="Width" class="Width" style="color: {% if variant == selected_variant %}var(--vw-color-background){% else %}var(--vw-color-secondary){% endif %}; font-size: 16px; font-family: var(--vw-font-family); font-weight: {% if variant == selected_variant %}600{% else %}500{% endif %}; word-wrap: break-word">{{ variant_dimensions[0] | strip }}</div>
                      <div data-layer="Separator" class="Separator" style="color: {% if variant == selected_variant %}var(--vw-color-background){% else %}var(--vw-color-secondary){% endif %}; font-size: 16px; font-family: var(--vw-font-family); font-weight: {% if variant == selected_variant %}600{% else %}500{% endif %}; word-wrap: break-word">X</div>
                      <div data-layer="Height" class="Height" style="color: {% if variant == selected_variant %}var(--vw-color-background){% else %}var(--vw-color-secondary){% endif %}; font-size: 16px; font-family: var(--vw-font-family); font-weight: {% if variant == selected_variant %}600{% else %}500{% endif %}; word-wrap: break-word">{{ variant_dimensions[1] | strip }}</div>
                    </div>
                    <div data-layer="Price" class="Price" style="color: {% if variant == selected_variant %}var(--vw-color-background){% else %}var(--vw-color-secondary){% endif %}; font-size: 16px; font-family: var(--vw-font-family); font-weight: 600; word-wrap: break-word">{{ variant.price | money }}</div>
                  </div>
                  <div data-layer="Frame 20" class="Frame20" style="align-self: stretch; justify-content: {% if variant == selected_variant %}space-between{% else %}flex-end{% endif %}; align-items: center; display: inline-flex">
                    {%- if variant == selected_variant -%}
                      <div data-layer="Icon Instance" class="IconInstance" style="width: 24px; height: 24px; justify-content: center; align-items: center; gap: 10px; display: flex">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                          <path d="M18 15l12 9l6 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                      </div>
                    {%- endif -%}
                    <div data-layer="Stock Info" class="StockInfo" style="color: {% if variant == selected_variant %}var(--vw-color-background){% else %}var(--vw-color-secondary){% endif %}; font-size: 14px; font-family: var(--vw-font-family); font-weight: 400; word-wrap: break-word">
                      {%- assign sold = variant.metafields.custom.units_sold | default: 0 -%}
                      {%- assign remaining = variant.inventory_quantity -%}
                      {{ sold }} sold - {{ remaining }} remaining
                    </div>
                  </div>
                </div>
              {%- endfor -%}
            </div>
            <div data-layer="Container" class="Container" style="width: 100%; justify-content: flex-start; align-items: center; gap: 10px; display: flex; flex-wrap: wrap;">
              <div data-layer="Options/True/False" class="OptionsTrueFalse" style="flex: 1 1 auto; min-width: 300px; height: auto; padding-left: 20px; padding-right: 20px; padding-top: 10px; padding-bottom: 10px; background: var(--vw-color-surface); border-radius: 5px; flex-direction: column; justify-content: center; align-items: flex-start; gap: 8px; display: flex">
                <div data-layer="Gallery Wrapped Canvas - Checkbox" data-state="Checked" class="GalleryWrappedCanvasCheckbox" style="position: relative; justify-content: flex-start; align-items: center; gap: 8px; display: inline-flex">
                  <input type="checkbox" name="properties[Gallery Wrap]" value="yes" checked style="width: 16px; height: 16px; accent-color: var(--vw-color-primary);">
                  <div data-layer="Accept terms and conditions" class="AcceptTermsAndConditions" style="color: var(--vw-color-primary); font-size: 14px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word">Gallery Wrapped Canvas</div>
                </div>
                <div data-layer="Container" class="Container" style="justify-content: flex-start; align-items: center; gap: 10px; display: flex; flex-wrap: wrap;">
                  <div data-layer="Size - Small" class="SizeSmall" style="justify-content: center; align-items: center; display: flex">
                    <div data-layer="24X36" class="X36" style="color: var(--vw-color-secondary); font-size: 12px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word">24X36</div>
                    <div data-layer="+ $75" class="75" style="color: var(--vw-color-secondary); font-size: 12px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word"> + $75</div>
                  </div>
                  <div data-layer="Line" class="Line" style="width: 1px; height: 10px; background: #D4D4D4;"></div>
                  <div data-layer="Size - Medium" class="SizeMedium" style="justify-content: center; align-items: center; display: flex">
                    <div data-layer="36X48" class="X48" style="color: var(--vw-color-secondary); font-size: 12px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word">36X48</div>
                    <div data-layer="+ $75" class="75" style="color: var(--vw-color-secondary); font-size: 12px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word"> + $75</div>
                  </div>
                  <div data-layer="Line" class="Line" style="width: 1px; height: 10px; background: #D4D4D4;"></div>
                  <div data-layer="Size - Large" class="SizeLarge" style="justify-content: center; align-items: center; display: flex">
                    <div data-layer="53X72" class="X72" style="color: var(--vw-color-secondary); font-size: 12px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word">53X72</div>
                    <div data-layer="+ $100" class="100" style="color: var(--vw-color-secondary); font-size: 12px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word"> + $125</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div data-layer="Buy Button" class="BuyButton" style="width: 100%; overflow: hidden; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
            <div data-layer="SKU" class="Sku" style="color: var(--vw-color-secondary); font-size: 14px; font-family: var(--vw-font-family); font-weight: 400; word-wrap: break-word">SKU: {{ selected_variant.sku }}</div>
            <div data-layer="Quantity Selector" class="QuantitySelector" style="width: 100%; height: 60px; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
              <div data-layer="Quantity Selector" class="QuantitySelector" style="width: 152px; height: 100%; padding-left: 20px; padding-right: 20px; padding-top: 10px; padding-bottom: 10px; overflow: hidden; outline: 1px #D4D4D4 solid; outline-offset: -1px; justify-content: center; align-items: center; gap: 10px; display: flex">
                <button type="button" data-layer="Quantity Icon" class="QuantityIcon quantity-minus" style="width: 24px; height: 24px; justify-content: center; align-items: center; gap: 10px; display: flex; background: none; border: none; cursor: pointer;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </button>
                <div data-layer="Quantity Value" class="QuantityValue" style="flex: 1 1 0; justify-content: center; align-items: center; gap: 10px; display: flex">
                  <input type="number" name="quantity" value="1" min="1" data-layer="Quantity Text" class="QuantityText" style="color: var(--vw-color-primary); font-size: 18px; font-family: var(--vw-font-family); font-weight: 700; word-wrap: break-word; border: none; background: transparent; text-align: center; width: 40px;">
                </div>
                <button type="button" data-layer="Quantity Icon" class="QuantityIcon quantity-plus" style="width: 24px; height: 24px; justify-content: center; align-items: center; gap: 10px; display: flex; background: none; border: none; cursor: pointer;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </button>
              </div>
              <button type="submit" name="add" data-layer="Button Button" data-property-1="Primary" class="ButtonButton" style="flex: 1 1 0; height: 100%; padding-left: 16px; padding-right: 16px; padding-top: 12px; padding-bottom: 12px; background: var(--vw-color-primary); border-radius: 4px; justify-content: center; align-items: center; gap: 10px; display: flex; border: none; cursor: pointer;">
                <div data-layer="Button" class="Button" style="color: var(--vw-color-background); font-size: 16px; font-family: var(--vw-font-family); font-weight: 500; word-wrap: break-word">ADD TO CART</div>
              </button>
            </div>
          </div>
        </div>
        
        <input type="hidden" name="id" value="{{ selected_variant.id }}">
      </form>
      
      <div data-layer="Purchase Button Container" class="PurchaseButtonContainer" style="width: 100%; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 20px; display: flex">
        <div data-layer="Buy button" class="BuyButton" style="width: 100%; height: 60px; position: relative; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
          {{ form | payment_button }}
        </div>
        <div data-layer="Shipping Info" class="ShippingInfo" style="width: 100%; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 10px; display: flex">
          <div data-layer="Artist Info Container" class="ArtistInfoContainer" style="justify-content: flex-start; align-items: center; gap: 4px; display: inline-flex">
            <div data-layer="Artist Label" class="ArtistLabel"><span style="color: var(--vw-color-primary); font-size: 16px; font-family: var(--vw-font-family); font-style: italic; font-weight: 400; text-decoration: underline; word-wrap: break-word">Shipping</span><span style="color: var(--vw-color-secondary); font-size: 16px; font-family: var(--vw-font-family); font-style: italic; font-weight: 400; word-wrap: break-word"> calculated at checkout.</span></div>
          </div>
          <div data-layer="Installment Info" class="InstallmentInfo" style="width: 100%; position: relative; justify-content: flex-start; align-items: center; display: flex">
            <div data-layer="Installment Text" class="InstallmentText" style="flex: 1 1 0"><span style="color: var(--vw-color-secondary); font-size: 16px; font-family: var(--vw-font-family); font-weight: 400; word-wrap: break-word">4 interest-free installments, or from </span><span style="color: var(--vw-color-secondary); font-size: 16px; font-family: var(--vw-font-family); font-weight: 700; word-wrap: break-word">${{ selected_variant.price | divided_by: 4.0 | money_without_currency }}</span><span style="color: var(--vw-color-secondary); font-size: 16px; font-family: var(--vw-font-family); font-weight: 400; word-wrap: break-word">/mo with Shop Pay</span></div>
          </div>
          <div data-layer="Power Info" class="PowerInfo" style="width: 100%; justify-content: center; align-items: center; gap: 10px; display: flex">
            <div data-layer="Power Text" class="PowerText" style="flex: 1 1 0"><span style="color: var(--vw-color-secondary); font-size: 16px; font-family: var(--vw-font-family); font-weight: 400; text-decoration: underline; word-wrap: break-word">Check your purchasing power</span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  {%- if section.settings.show_description -%}
  <div data-layer="Section-02" data-property-1="Variant2" class="Section02" style="width: 100%; max-width: 1200px; flex-direction: column; justify-content: flex-start; align-items: flex-start; gap: 20px; display: flex">
    <div data-layer="Frame 33" class="Frame33" style="align-self: stretch; min-height: 400px; justify-content: flex-start; align-items: center; gap: 50px; display: flex; flex-wrap: wrap;">
      <div data-layer="Description" class="Description" style="width: 322px; min-width: 280px; flex: 0 0 auto; position: relative; overflow: hidden; flex-direction: column; justify-content: flex-start; align-items: center; gap: 10px; display: flex">
        <div data-layer="Product Description Container" class="ProductDescriptionContainer" style="align-self: stretch; flex-direction: column; justify-content: flex-start; align-items: center; gap: 10px; display: flex">
          <div data-layer="Product Description" class="ProductDescription" style="align-self: stretch; color: #404040; font-size: 16px; font-family: var(--vw-font-family); font-weight: 400; line-height: 24px; word-wrap: break-word">{{ product.description }}</div>
        </div>
        <div data-layer="Read More Container" class="ReadMoreContainer" style="width: 119px; padding-left: 10px; justify-content: flex-start; align-items: flex-end; gap: 10px; display: inline-flex">
          <button data-layer="Read More Text" class="ReadMoreText" style="color: var(--vw-color-primary); font-size: 16px; font-family: var(--vw-font-family); font-weight: 400; text-decoration: underline; line-height: 24px; word-wrap: break-word; background: none; border: none; cursor: pointer;">read more</button>
        </div>
      </div>
      {%- if product.media[1] -%}
      <div data-layer="Additional Artwork Image" class="AdditionalArtworkImage" style="flex: 1 1 0; min-width: 300px; align-self: stretch; justify-content: flex-start; align-items: flex-start; display: flex">
        <div data-layer="Artwork Image/{{ product.handle }}" class="ArtworkImage{{ product.handle | capitalize | replace: '-', '' }}" style="flex: 1 1 0; align-self: stretch; background: white; overflow: hidden; border-radius: 5px; justify-content: center; align-items: center; gap: 10px; display: flex">
          <img data-layer="img" class="Img" style="width: 100%; height: auto; object-fit: cover;" src="{{ product.media[1] | image_url: width: 828 }}" />
        </div>
      </div>
      {%- endif -%}
    </div>
  </div>
  {%- endif -%}
</div>

<script>
  // Variant selection
  document.querySelectorAll('.variant-option').forEach(option => {
    option.addEventListener('click', function() {
      const variantId = this.dataset.variantId;
      document.querySelector('input[name="id"]').value = variantId;
      
      // Update styles for all variant options
      document.querySelectorAll('.variant-option').forEach(opt => {
        const isSelected = opt === this;
        opt.style.background = isSelected ? 'var(--vw-color-primary)' : 'var(--vw-color-surface)';
        opt.style.opacity = isSelected ? '1' : '0.70';
        opt.style.outline = `1px ${isSelected ? 'var(--vw-color-primary)' : 'var(--vw-color-surface)'} solid`;
        opt.dataset.isselected = isSelected ? 'True' : 'False';
        
        // Update text colors
        opt.querySelectorAll('.Width, .Height, .Separator').forEach(el => {
          el.style.color = isSelected ? 'var(--vw-color-background)' : 'var(--vw-color-secondary)';
          el.style.fontWeight = isSelected ? '600' : '500';
        });
        opt.querySelector('.Price').style.color = isSelected ? 'var(--vw-color-background)' : 'var(--vw-color-secondary)';
        opt.querySelector('.StockInfo').style.color = isSelected ? 'var(--vw-color-background)' : 'var(--vw-color-secondary)';
        
        // Update frame justification and chevron
        const frame20 = opt.querySelector('.Frame20');
        frame20.style.justifyContent = isSelected ? 'space-between' : 'flex-end';
        const chevron = opt.querySelector('.IconInstance');
        if (chevron && !isSelected) chevron.remove();
        if (!chevron && isSelected) {
          const chevronHtml = `<div data-layer="Icon Instance" class="IconInstance" style="width: 24px; height: 24px; justify-content: center; align-items: center; gap: 10px; display: flex">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M18 15l12 9l6 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>`;
          frame20.insertAdjacentHTML('afterbegin', chevronHtml);
        }
      });
      
      // Update main display
      const selectedDimensions = this.querySelector('.Dimensions').cloneNode(true);
      const selectedPrice = this.querySelector('.Price').cloneNode(true);
      
      document.querySelector('.TotalSelectedPrice .Dimensions').replaceWith(selectedDimensions);
      document.querySelector('.TotalSelectedPrice .Dimensions').style.fontSize = '18px';
      document.querySelector('.TotalSelectedPrice .Dimensions .Width').style.color = 'var(--vw-color-primary)';
      document.querySelector('.TotalSelectedPrice .Dimensions .Height').style.color = 'var(--vw-color-primary)';
      document.querySelector('.TotalSelectedPrice .Dimensions .Separator').style.color = 'var(--vw-color-primary)';
      
      document.querySelector('.TotalPrice').textContent = selectedPrice.textContent + ' USD';
      
      // Update SKU
      const sku = '{{ product.handle | upcase }}-' + this.querySelector('.Width').textContent + 'X' + this.querySelector('.Height').textContent;
      document.querySelector('.Sku').textContent = 'SKU: ' + sku;
    });
  });

  // Thumbnail click handling
  document.querySelectorAll('[data-layer*="Thumbnail-Image"]').forEach((thumb, index) => {
    thumb.addEventListener('click', function() {
      const img = this.querySelector('img');
      const mainImg = document.querySelector('.MainArtworkImage img');
      mainImg.src = img.src.replace('_220x', '_800x');
      
      // Update selected state
      document.querySelectorAll('[data-layer*="Thumbnail-Image"]').forEach(t => {
        t.dataset.state = 'Default';
        const selected = t.querySelector('.Seleted');
        if (selected) selected.remove();
      });
      
      this.dataset.state = 'Selected';
      if (!this.querySelector('.Seleted')) {
        const selectedDiv = document.createElement('div');
        selectedDiv.setAttribute('data-layer', 'Seleted');
        selectedDiv.className = 'Seleted';
        selectedDiv.style = 'width: 150px; height: 5px; position: relative; background: var(--vw-color-primary); border-radius: 5px';
        this.querySelector('[data-layer*="Thumbnail-Image /"]').insertBefore(selectedDiv, this.querySelector('img'));
      }
    });
  });

  // Quantity selector
  const quantityInput = document.querySelector('.QuantityText');
  document.querySelector('.quantity-minus').addEventListener('click', function() {
    const currentValue = parseInt(quantityInput.value) || 1;
    if (currentValue > 1) {
      quantityInput.value = currentValue - 1;
    }
  });
  
  document.querySelector('.quantity-plus').addEventListener('click', function() {
    const currentValue = parseInt(quantityInput.value) || 1;
    quantityInput.value = currentValue + 1;
  });

  // Read more functionality
  const readMoreBtn = document.querySelector('.ReadMoreText');
  if (readMoreBtn) {
    readMoreBtn.addEventListener('click', function() {
      const description = document.querySelector('.ProductDescription');
      const isExpanded = this.textContent === 'read less';
      
      if (isExpanded) {
        description.style.maxHeight = '200px';
        description.style.overflow = 'hidden';
        this.textContent = 'read more';
      } else {
        description.style.maxHeight = 'none';
        description.style.overflow = 'visible';
        this.textContent = 'read less';
      }
    });
  }
</script>

{% schema %}
{
  "name": "VividWalls Product",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Theme Integration"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "Accent 1"
        },
        {
          "value": "accent-2",
          "label": "Accent 2"
        },
        {
          "value": "background-1",
          "label": "Background 1"
        },
        {
          "value": "background-2",
          "label": "Background 2"
        },
        {
          "value": "inverse",
          "label": "Inverse"
        }
      ],
      "default": "background-1",
      "label": "Color scheme"
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "default": true,
      "label": "Show product description section"
    }
  ],
  "presets": [
    {
      "name": "VividWalls Product"
    }
  ]
}
{% endschema %}