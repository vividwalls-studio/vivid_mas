{
  "name": "VividWalls Color Analysis Agent",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [-20, 100],
      "id": "ca1a2b3c-4d5e-6f7g-8h9i-0j1k2l3m4n5o",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "d6OaJCsy6QryngZX",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionKey": "={{ $json.chatId || $json.session_id || 'color_analysis_' + $now.toMillis() }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [120, 180],
      "id": "ca2b3c4d-5e6f-7g8h-9i0j-1k2l3m4n5o6p",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "cm4WrXg1MnK2sWUm",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "content": "# Color Analysis Agent Workflow Documentation\n\n## Overview\nThis specialized workflow provides advanced color analysis and psychology insights for VividWalls' art collections. It integrates with product catalogs to offer:\n- Color palette extraction and analysis\n- Psychological impact assessment\n- Interior design compatibility\n- Mood and emotion mapping\n- Cultural color significance\n- Accessibility compliance (WCAG)\n- Seasonal color trends\n- Customer preference matching\n\n## Workflow Triggers\n1. **Product Analysis**: New artwork color evaluation\n2. **Customer Consultation**: Personalized color recommendations\n3. **Collection Planning**: Color harmony assessment\n4. **Marketing Insights**: Color trend analysis\n\n## Key Components\n\n### 1. Color Psychology MCP Client\n- Analyzes emotional impact of colors\n- Provides cultural context\n- Suggests complementary palettes\n- Evaluates color harmony\n\n### 2. Image Analysis Tool\n- Extracts dominant colors\n- Creates color palettes\n- Analyzes color distribution\n- Identifies color temperature\n\n### 3. Shopify Integration\n- Fetches product images\n- Updates color metadata\n- Tags products by color\n- Enables color search\n\n### 4. Design System Tool\n- Matches interior styles\n- Suggests room applications\n- Provides lighting considerations\n- Creates mood boards\n\n## Integration Points\n\n### MCP Servers Used:\n- `color-psychology`: Core color analysis\n- `shopify`: Product catalog access\n- `cloudinary`: Image processing\n- `supabase`: Color preference storage\n- `neo4j-memory`: Color relationship mapping\n\n### Data Flow:\n1. Receives artwork or request\n2. Extracts color information\n3. Analyzes psychological impact\n4. Generates recommendations\n5. Stores insights for future use\n\n## Color Analysis Features\n- RGB/HSL/CMYK conversion\n- Pantone matching\n- Color blindness simulation\n- Contrast ratio checking\n- Seasonal palette mapping\n- Trend forecasting\n\n## Use Cases\n- Product launches\n- Customer consultations\n- Collection curation\n- Marketing campaigns\n- Interior design services",
        "height": 760,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -800,
        -200
      ],
      "typeVersion": 1,
      "id": "workflow-doc-note",
      "name": "Workflow Documentation"
    },
    {
      "parameters": {
        "content": "# Color Analysis Agent System Prompt\n\nYou are the Color Analysis Agent for VividWalls, specializing in color psychology, design harmony, and personalized color recommendations for artwork selection. You help customers choose pieces that align with their emotional needs, interior design goals, and personal preferences.\n\n## Primary Functions\n\n### 1. Color Palette Analysis\n- Extract dominant and accent colors\n- Identify color relationships\n- Analyze color temperature\n- Evaluate color balance\n\n### 2. Psychological Impact\n- Emotional associations\n- Mood influence\n- Energy levels\n- Stress/calm factors\n\n### 3. Design Compatibility\n- Interior style matching\n- Existing decor harmony\n- Lighting considerations\n- Space enhancement\n\n### 4. Cultural Context\n- Color symbolism\n- Regional preferences\n- Cultural sensitivities\n- Trend alignment\n\n## Analysis Framework\n\n### Color Properties\n- **Hue**: Primary color family\n- **Saturation**: Color intensity\n- **Value**: Lightness/darkness\n- **Temperature**: Warm/cool\n- **Contrast**: Visual impact\n\n### Psychological Effects\n- **Red**: Energy, passion, urgency\n- **Blue**: Calm, trust, stability\n- **Green**: Nature, growth, balance\n- **Yellow**: Joy, optimism, creativity\n- **Purple**: Luxury, mystery, spirituality\n- **Orange**: Enthusiasm, warmth, adventure\n- **Neutral**: Sophistication, flexibility\n\n### Room Applications\n- **Living Room**: Social, welcoming\n- **Bedroom**: Restful, personal\n- **Office**: Productive, focused\n- **Dining**: Appetizing, convivial\n- **Bathroom**: Clean, refreshing\n\n## Response Format\n```json\n{\n  \"analysis_type\": \"product|consultation|trend\",\n  \"color_data\": {\n    \"dominant_colors\": [],\n    \"color_harmony\": \"type\",\n    \"temperature\": \"warm|cool|neutral\",\n    \"mood\": \"descriptive_terms\"\n  },\n  \"recommendations\": {\n    \"best_for\": [\"room_types\"],\n    \"pairs_with\": [\"color_schemes\"],\n    \"avoid_if\": [\"considerations\"]\n  },\n  \"products\": [\"matching_artworks\"]\n}\n```",
        "height": 600,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -200,
        -200
      ],
      "typeVersion": 1,
      "id": "system-prompt-note",
      "name": "System Prompt"
    },
    {
      "parameters": {
        "content": "# Trigger: Product Color Analysis\n\n## Source\n- Product Director Agent\n- New product uploads\n- Catalog updates\n\n## Input Structure\n```json\n{\n  \"trigger\": \"product_analysis\",\n  \"product_id\": \"VW_ART_12345\",\n  \"image_url\": \"https://cdn.vividwalls.com/products/abstract-harmony.jpg\",\n  \"product_name\": \"Abstract Harmony\",\n  \"artist\": \"Elena Rodriguez\",\n  \"style\": \"Contemporary Abstract\",\n  \"request_details\": {\n    \"analysis_depth\": \"comprehensive\",\n    \"include_recommendations\": true,\n    \"generate_tags\": true,\n    \"accessibility_check\": true\n  }\n}\n```\n\n## Processing Steps\n1. Fetch product image\n2. Extract color palette\n3. Analyze color relationships\n4. Assess psychological impact\n5. Generate room recommendations\n6. Create searchable tags\n7. Check accessibility compliance\n8. Store analysis results\n\n## Output Example\n```json\n{\n  \"product_id\": \"VW_ART_12345\",\n  \"color_analysis\": {\n    \"dominant_colors\": [\n      {\"hex\": \"#2C5F8B\", \"name\": \"Ocean Blue\", \"percentage\": 35},\n      {\"hex\": \"#E8B04B\", \"name\": \"Golden Sand\", \"percentage\": 25},\n      {\"hex\": \"#A4C2A5\", \"name\": \"Sage Green\", \"percentage\": 20}\n    ],\n    \"color_harmony\": \"Split Complementary\",\n    \"temperature\": \"Balanced Warm-Cool\",\n    \"mood\": \"Serene yet Energizing\",\n    \"accessibility\": {\n      \"wcag_aa\": \"pass\",\n      \"contrast_ratio\": 7.2,\n      \"colorblind_safe\": true\n    }\n  },\n  \"recommendations\": {\n    \"ideal_rooms\": [\"Living Room\", \"Home Office\", \"Meditation Space\"],\n    \"interior_styles\": [\"Coastal\", \"Modern\", \"Transitional\"],\n    \"complementary_colors\": [\"Warm Grays\", \"Cream\", \"Natural Wood\"],\n    \"lighting\": \"Best in natural light or warm LED\"\n  },\n  \"marketing_tags\": [\n    \"blue-artwork\",\n    \"coastal-decor\",\n    \"calming-art\",\n    \"ocean-inspired\"\n  ]\n}\n```",
        "height": 700,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        -200
      ],
      "typeVersion": 1,
      "id": "trigger-1-note",
      "name": "Trigger: Product Analysis"
    },
    {
      "parameters": {
        "content": "# Trigger: Customer Color Consultation\n\n## Source\n- Sales Agent\n- Customer Service\n- Website chat\n\n## Input Structure\n```json\n{\n  \"trigger\": \"color_consultation\",\n  \"customer_id\": \"CUST_98765\",\n  \"consultation_type\": \"room_matching\",\n  \"customer_preferences\": {\n    \"favorite_colors\": [\"blues\", \"greens\"],\n    \"avoid_colors\": [\"bright reds\", \"orange\"],\n    \"room_details\": {\n      \"type\": \"bedroom\",\n      \"size\": \"medium\",\n      \"lighting\": \"north_facing\",\n      \"existing_colors\": {\n        \"walls\": \"soft gray\",\n        \"furniture\": \"white and natural wood\",\n        \"textiles\": \"navy and cream\"\n      }\n    },\n    \"style_preference\": \"Modern Minimalist\",\n    \"mood_goal\": \"Calm and restorative\"\n  }\n}\n```\n\n## Processing Steps\n1. Analyze customer preferences\n2. Evaluate room characteristics\n3. Consider lighting conditions\n4. Match with product catalog\n5. Create personalized palette\n6. Generate recommendations\n7. Provide visualization\n\n## Output Example\n```json\n{\n  \"consultation_id\": \"CONSULT_2024_001\",\n  \"personalized_analysis\": {\n    \"recommended_palette\": {\n      \"primary\": \"Soft Blues and Sage Greens\",\n      \"accent\": \"Warm Grays and Cream\",\n      \"avoid\": \"High contrast or saturated warm tones\"\n    },\n    \"psychological_fit\": {\n      \"mood_alignment\": 95,\n      \"style_match\": 90,\n      \"room_suitability\": 98\n    }\n  },\n  \"product_recommendations\": [\n    {\n      \"product_id\": \"VW_ART_00123\",\n      \"name\": \"Misty Morning Abstract\",\n      \"match_score\": 96,\n      \"reason\": \"Perfect blend of calming blues and grays\"\n    },\n    {\n      \"product_id\": \"VW_ART_00456\",\n      \"name\": \"Sage Serenity\",\n      \"match_score\": 94,\n      \"reason\": \"Subtle green tones complement existing navy\"\n    }\n  ],\n  \"design_tips\": [\n    \"North-facing light will enhance cool tones\",\n    \"Consider 24x36 size for optimal wall balance\",\n    \"Pair with warm white matting if framed\"\n  ]\n}\n```",
        "height": 700,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1000,
        -200
      ],
      "typeVersion": 1,
      "id": "trigger-2-note",
      "name": "Trigger: Customer Consultation"
    },
    {
      "parameters": {
        "content": "# Trigger: Collection Color Harmony\n\n## Source\n- Marketing Director\n- Content Strategy Agent\n- Product curation team\n\n## Input Structure\n```json\n{\n  \"trigger\": \"collection_harmony\",\n  \"collection_name\": \"Spring Serenity 2024\",\n  \"products\": [\n    \"VW_ART_10001\",\n    \"VW_ART_10002\",\n    \"VW_ART_10003\",\n    \"VW_ART_10004\"\n  ],\n  \"analysis_goals\": {\n    \"check_cohesion\": true,\n    \"identify_gaps\": true,\n    \"suggest_additions\": true,\n    \"seasonal_alignment\": \"spring\"\n  }\n}\n```\n\n## Processing Steps\n1. Analyze each product's colors\n2. Map color relationships\n3. Evaluate collection cohesion\n4. Identify color gaps\n5. Suggest complementary pieces\n6. Verify seasonal appropriateness\n7. Generate harmony score\n\n## Output Example\n```json\n{\n  \"collection_analysis\": {\n    \"harmony_score\": 88,\n    \"dominant_palette\": {\n      \"primary\": [\"Soft Corals\", \"Sage Greens\", \"Sky Blues\"],\n      \"secondary\": [\"Warm Whites\", \"Blush Pinks\"],\n      \"accent\": [\"Golden Yellow\"]\n    },\n    \"color_relationships\": {\n      \"type\": \"Analogous with Complementary Accents\",\n      \"balance\": \"Well-distributed\",\n      \"energy\": \"Fresh and uplifting\"\n    },\n    \"gaps_identified\": [\n      \"Missing warm neutral anchor piece\",\n      \"Could benefit from deeper green accent\"\n    ],\n    \"suggested_additions\": [\n      {\n        \"product_id\": \"VW_ART_20045\",\n        \"name\": \"Desert Bloom\",\n        \"reason\": \"Adds warm neutral base\"\n      }\n    ],\n    \"seasonal_fit\": {\n      \"score\": 92,\n      \"strengths\": \"Fresh colors, light energy\",\n      \"adjustments\": \"Consider adding lavender tones\"\n    }\n  }\n}\n```",
        "height": 700,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -800,
        600
      ],
      "typeVersion": 1,
      "id": "trigger-3-note",
      "name": "Trigger: Collection Harmony"
    },
    {
      "parameters": {
        "content": "# Trigger: Color Trend Analysis\n\n## Source\n- Analytics Director\n- Marketing team\n- Seasonal planning\n\n## Input Structure\n```json\n{\n  \"trigger\": \"trend_analysis\",\n  \"analysis_period\": \"Q2_2024\",\n  \"scope\": {\n    \"market_segment\": \"home_decor\",\n    \"geographic_focus\": [\"North America\", \"Europe\"],\n    \"demographic\": \"25-45_affluent\"\n  },\n  \"comparison_data\": {\n    \"previous_period\": \"Q1_2024\",\n    \"competitor_tracking\": true,\n    \"social_media_trends\": true\n  }\n}\n```\n\n## Processing Steps\n1. Analyze sales by color\n2. Track color search trends\n3. Monitor social media\n4. Evaluate competitor palettes\n5. Predict upcoming trends\n6. Generate recommendations\n\n## Output Example\n```json\n{\n  \"trend_report\": {\n    \"current_trending\": {\n      \"rising\": [\n        {\"color\": \"Terracotta\", \"growth\": 45, \"driver\": \"Desert modern trend\"},\n        {\"color\": \"Deep Teal\", \"growth\": 38, \"driver\": \"Moody maximalism\"}\n      ],\n      \"declining\": [\n        {\"color\": \"Millennial Pink\", \"decline\": -22},\n        {\"color\": \"Ultra Violet\", \"decline\": -18}\n      ],\n      \"stable\": [\"Navy Blue\", \"Sage Green\", \"Warm Gray\"]\n    },\n    \"seasonal_forecast\": {\n      \"upcoming\": \"Earthy Ochres and Muted Greens\",\n      \"confidence\": 78,\n      \"based_on\": [\"Fashion week\", \"Design fairs\", \"Search data\"]\n    },\n    \"competitive_insights\": {\n      \"market_leaders_using\": [\"Warm minimalism\", \"Nature-inspired\"],\n      \"opportunity_gaps\": [\"Bold jewel tones\", \"Gradient abstracts\"]\n    },\n    \"recommendations\": [\n      \"Develop terracotta-based collection\",\n      \"Create 'Moody Blues' series\",\n      \"Phase out pink-heavy pieces\"\n    ]\n  }\n}\n```",
        "height": 700,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -200,
        600
      ],
      "typeVersion": 1,
      "id": "trigger-4-note",
      "name": "Trigger: Trend Analysis"
    },
    {
      "parameters": {
        "content": "# Color Psychology Reference\n\n## Primary Colors\n\n### Red Spectrum\n- **Pure Red**: Energy, passion, action\n- **Burgundy**: Sophistication, depth\n- **Coral**: Warmth, approachability\n- **Rose**: Romance, gentleness\n\n### Blue Spectrum\n- **Navy**: Authority, tradition\n- **Sky Blue**: Peace, openness\n- **Teal**: Balance, clarity\n- **Powder Blue**: Softness, youth\n\n### Yellow Spectrum\n- **Golden**: Luxury, warmth\n- **Lemon**: Energy, freshness\n- **Mustard**: Earthiness, vintage\n- **Butter**: Comfort, subtlety\n\n## Room-Specific Recommendations\n\n### Living Room\n- **Goal**: Social, welcoming\n- **Best**: Warm neutrals, soft blues\n- **Accent**: Jewel tones, metallics\n- **Avoid**: Overly stimulating reds\n\n### Bedroom\n- **Goal**: Restful, intimate\n- **Best**: Cool blues, soft greens\n- **Accent**: Blush, lavender\n- **Avoid**: Bright yellows, oranges\n\n### Home Office\n- **Goal**: Focus, creativity\n- **Best**: Greens, muted blues\n- **Accent**: Energizing yellows\n- **Avoid**: Distracting patterns\n\n### Dining Room\n- **Goal**: Appetite, conversation\n- **Best**: Warm reds, oranges\n- **Accent**: Gold, copper\n- **Avoid**: Cool grays, blacks\n\n## Cultural Considerations\n\n### Western Markets\n- White: Purity, cleanliness\n- Black: Sophistication, formality\n- Green: Nature, sustainability\n\n### Asian Markets\n- Red: Luck, prosperity\n- Gold: Wealth, status\n- White: Use carefully (mourning)\n\n### Middle Eastern\n- Blue: Protection, spirituality\n- Green: Religious significance\n- Gold: Prestige, tradition",
        "height": 700,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        600
      ],
      "typeVersion": 1,
      "id": "psychology-reference-note",
      "name": "Color Psychology Reference"
    },
    {
      "parameters": {
        "content": "# MCP Integration Details\n\n## Color Psychology MCP Server\n\n### Available Tools\n- `analyze_color_palette`: Extract and analyze colors\n- `get_color_psychology`: Emotional impact data\n- `check_color_harmony`: Relationship assessment\n- `suggest_complementary`: Palette recommendations\n- `cultural_significance`: Regional meanings\n- `accessibility_check`: WCAG compliance\n\n### Usage Examples\n```json\n// Analyze artwork colors\n{\n  \"tool\": \"analyze_color_palette\",\n  \"parameters\": {\n    \"image_url\": \"https://...\",\n    \"detail_level\": \"comprehensive\",\n    \"include_names\": true\n  }\n}\n\n// Get psychological impact\n{\n  \"tool\": \"get_color_psychology\",\n  \"parameters\": {\n    \"colors\": [\"#2C5F8B\", \"#E8B04B\"],\n    \"context\": \"bedroom\",\n    \"culture\": \"western\"\n  }\n}\n```\n\n## Shopify MCP Integration\n\n### Product Operations\n- Fetch product images\n- Update color metadata\n- Add color tags\n- Create color collections\n- Enable color filtering\n\n### Batch Processing\n- Analyze multiple products\n- Bulk tag updates\n- Collection organization\n- Seasonal transitions\n\n## Data Storage\n\n### Supabase Schema\n```sql\ncolor_analyses {\n  id: uuid\n  product_id: string\n  dominant_colors: jsonb\n  harmony_type: string\n  mood_tags: array\n  recommendations: jsonb\n  created_at: timestamp\n}\n\ncustomer_preferences {\n  customer_id: string\n  preferred_colors: array\n  avoided_colors: array\n  style_profile: jsonb\n}\n```\n\n### Neo4j Relationships\n- Product ←→ Color nodes\n- Color ←→ Mood connections\n- Customer ←→ Preference links\n- Trend ←→ Time mapping",
        "height": 700,
        "width": 520
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1000,
        600
      ],
      "typeVersion": 1,
      "id": "mcp-integration-note",
      "name": "MCP Integration Details"
    }
  ],
  "connections": {
    "Color Psychology MCP Client - List Tools": {
      "ai_tool": [
        [
          {
            "node": "Color Analysis Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Color Psychology MCP Client - Execute Tool": {
      "ai_tool": [
        [
          {
            "node": "Color Analysis Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Shopify MCP Client - List Tools": {
      "ai_tool": [
        [
          {
            "node": "Color Analysis Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Shopify MCP Client - Execute Tool": {
      "ai_tool": [
        [
          {
            "node": "Color Analysis Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Color Analysis Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Color Analysis Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Color Analysis Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "color-analysis-v2",
  "meta": {
    "instanceId": "80621a4270e0ac393edfe0b84576ab8588a37d1db0f23bca7018517bcf39d930"
  },
  "id": "ColorAnalysisAgent789",
  "tags": []
}